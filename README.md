# PhotoMosaicArt
2.0では素材画像を全て少なくとも一回は使用するコードにした．

〜手法〜

本手法のモザイクアートは領域を分割して，領域ごとに写真を当てはめる．
元画像の画素値との比較のために素材画像の代表的な色を抽出する必要がある．
素材画像の代表的な色を抽出するための手法として，画素値の中央値，最頻値，平均値，k分割法などが挙げられるが，本手法では画像の画素値が崩れない中央値を採用する．
写真の枚数分だけ，元画像の領域を分割し，領域ごとに画素値の中央値を求める．
次に素材画像の組み合わせを作成する必要がある．元画像の領域ごとの中央値と素材画像の中央値の距離を求め，一番近いものを選択することで組み合わせを作成できるが，素材画像に重複がないとすると，選択するにつれて，徐々に距離が離れていく可能性がある．
本手法では遺伝的アルゴリズムを用いる．適応度の求め方は元画像の各領域ごとの中央値と素材画像の中央値の距離の合計値であり，適応度が小さいほど良い個体とする．素材画像に重複がないとすると，全体的な組み合わせのバランスを考慮したアルゴリズムである．2.0では交叉方法を従来の一点交差ではなく，部分写像交叉を使用し，素材画像の重複を防いだ．

〜ファイルの説明〜

MaterialProcessing.cppは素材となる画像を読み込み，全ての画素値の中央値を求め，その値をMaterialResult.csvに出力する．
OriginalProcessing.cppは元となる画像を読み込み，2025(= 45 * 45)分割し，各々の画素値の中央値を求め，その値をOriginalResult.csvに出力する．
main.cppはMaterialResult.csvとOriginalResult.csvを読み込み，遺伝的アルゴリズムを使用し，画像の並べ方をResult.csvに出力する．
Output.cppはResult.csvを読み込み，素材画像を左から右に一つずつ結合する．二行目まで作成が終了した場合，上下で画像を結合し，45行分繰り返し，モザイクアートを生成し，出力する．
colortransfer.cppは元画像の各領域の中央値30%とOutput.cppで生成した画像70%で合成した画像を出力する．